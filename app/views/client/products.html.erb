
<div class="product-model">
  <div class="container">
    <ol class="breadcrumb">
      <li><a href="/">Home</a></li>
      <li class="active">Products</li>
    </ol>
    <h2>Our Products</h2>
    <div class="col-md-9 product-model-sec">


      <table class=" table-hover table table-striped table-bordered" id="products_tbl">
        <div class="table-header">
          <thead>
          <tr class="heading-table">
            <th>Name</th>
            <th>Pharmacy Price</th>
            <th>Population Price</th>
            <th>Category</th>
            <th>Order</th>

          </tr>
          </thead>
        </div>
        <tbody>
        <% Product.all.each do |product| %>

            <tr class="table-row" style="cursor: pointer;" onclick="javascript:window
                .location = '/client/single_product?product_id=<%= product.id %>'">
              <td>
                <%= product.name %>
              </td>
              <td>
                <span><%= product.price_pharmacy %></span>
              </td>
              <td>
                <span><%= product.price_population %></span>
              </td>
              <td>
                <span><%= product.category.name %></span>
              </td>
              <td>
                <span>order</span>
              </td>
            </tr>

        <% end %>
        </tbody>
      </table>

    </div>
    <div class="rsidebar span_1_of_left">
      <section class="sky-form">
        <div class="product_right">
          <h4 class="m_2"><span class="glyphicon glyphicon-minus" aria-hidden="true"></span>Categories</h4>
          <% counter = 0 %>
          <% @parent_categories.each do |category| %>
              <div class="tab<%= counter+=1 %>">
                <ul class="place">
                  <li class="sort"><%= category.name %></li>
                  <li class="by"><img src="/client/images/do.png" alt=""></li>
                  <div class="clearfix"></div>
                </ul>
                <div class="single-bottom">
                  <% Category.where(parent_id: category.id).each do |child_category| %>
                      <a style="cursor:pointer; text-decoration: none;"><p class="child_category" ><%= child_category.name %></p></a>
                  <% end %>
                </div>
              </div>
          <% end %>
          <!--script-->
          <script>
            $(document).ready(function () {
              <% outer_count = 1 %>
              <% @parent_categories.each do |category| %>
              $(".tab<%= outer_count %> .single-bottom").hide();
              $(".tab<%= outer_count %> ul").click(function () {

                <% inner_count=1 %>
                <% @parent_categories.each do |category| %>
                    <%if outer_count == inner_count %>
                    $(".tab<%= inner_count %> .single-bottom").slideToggle(300);
                    <% else %>
                    $(".tab<%= inner_count %> .single-bottom").hide();
                    <% end %>

                <% inner_count+=1 %>
                <% end %>
                $("input[type='search']").val('<%= category.name %>').trigger('search');
              });
              <% outer_count+=1 %>
              <% end %>

              $('.child_category').click(function(){
                $("input[type='search']").val($(this).html()).trigger('search');
              });
            });
          </script>
          <!-- script -->
        </div>
      </section>

      <script type="text/javascript" src="js/jquery-ui.min.js"></script>
      <link rel="stylesheet" type="text/css" href="css/jquery-ui.css">
      <script type='text/javascript'>//<![CDATA[
      $(window).load(function () {
        $("#slider-range").slider({
          range: true,
          min: 0,
          max: 400000,
          values: [8500, 350000],
          slide: function (event, ui) {
            $("#amount").val("$" + ui.values[0] + " - $" + ui.values[1]);
          }
        });
        $("#amount").val("$" + $("#slider-range").slider("values", 0) + " - $" + $("#slider-range").slider("values", 1));

      $(document).ready(function(){

            $("#products_tbl").dataTable({
              lengthMenu: [[4, 8, -1], [5, 10, "All"]]
            });
          }
      );
      });//]]>


      </script>
      <!---->

    </div>
  </div>
</div>
</div>